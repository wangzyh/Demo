# 网络
1. TCP:
    - 特性
        1. 面向连接的、可靠的字节流服务
        2. 仅有两方进行彼此通信, 广播和多播不能用于 TCP
        3. 校验和,确认和重传机制来保证可靠传输
        4. 给数据分节进行排序,并使用累积确认保证数据的顺序不变和非重复<br/>
        **node**: TCP 并不能保证数据一定会被对方接收到,因为这是不可能的。
           如果有可能,就把数据递送到接收方,否则就（通过*放弃重传*并且*中断连接*这一手段）通知用户。
           因此准确说 TCP 也不是 *100% 可靠*的协议,它所能提供的是*数据的可靠递送*或*故障的可靠通知*。
    - *三次握手*
        1. 第一次握手(SYN=1, seq=x):<br/>
           客户端发送一个 TCP 的 SYN 标志位置1的包,指明客户端打算连接的服务器的端口,以及初始序号 X,保存在包头的序列号(Sequence Number)字段里。
            发送完毕后,客户端进入 SYN_SEND 状态。<br/>
        2. 第二次握手(SYN=1, ACK=1, seq=y, ACKnum=x+1):<br/>
            服务器发回确认包(ACK)应答。即 SYN 标志位和 ACK 标志位均为1。
            服务器端选择自己 ISN 序列号,放到 Seq 域里,
            同时将确认序号(ACK)设置为客户的 ISN 加1,即X+1。 
            发送完毕后,服务器端进入 SYN_RCVD 状态。
        3. 第三次握手(ACK=1,ACKnum=y+1)<br/>
            客户端再次发送确认包(ACK),SYN 标志位为0,ACK 标志位为1,
            并且把服务器发来 ACK 的序号字段+1,放在确定字段中发送给对方,并且在数据段放写ISN的+1
            发送完毕后,客户端进入 ESTABLISHED 状态,
            当服务器端接收到这个包时,也进入 ESTABLISHED 状态,TCP 握手结束。
    - *四次挥手*
        1. 第一次挥手(FIN=1,seq=x)<br/>
            假设客户端想要关闭连接,客户端发送一个 FIN 标志位置为1的包,表示自己已经没有数据可以发送了,但是仍然可以接受数据。
            发送完毕后,客户端进入 FIN_WAIT_1 状态。
        2. 第二次挥手(ACK=1,ACKnum=x+1)<br/>
            服务器端确认客户端的 FIN 包,发送一个确认包,表明自己接受到了客户端关闭连接的请求,但还没有准备好关闭连接。
            发送完毕后,服务器端进入 CLOSE_WAIT 状态,客户端接收到这个确认包之后,进入 FIN_WAIT_2 状态,等待服务器端关闭连接。
        3. 第三次挥手(FIN=1,seq=y)<br/>
            服务器端准备好关闭连接时,向客户端发送结束连接请求,FIN 置为1。
            发送完毕后,服务器端进入 LAST_ACK 状态,等待来自客户端的最后一个ACK。
        4. 第四次挥手(ACK=1,ACKnum=y+1)<br/>
            客户端接收到来自服务器端的关闭请求,发送一个确认包,并进入 TIME_WAIT状态,等待可能出现的要求重传的 ACK 包。
            服务器端接收到这个确认包之后,关闭连接,进入 CLOSED 状态。
            客户端等待了某个固定时间（两个最大段生命周期,2MSL,2 Maximum Segment Lifetime）之后,没有收到服务器端的 ACK ,认为服务器端已经正常关闭连接,于是自己也关闭连接,进入 CLOSED 状态。 
    - SYN 攻击<br/>
        攻击客户端在短时间内伪造大量不存在的IP地址,向服务器不断地发送SYN包,服务器回复确认包,并等待客户的确认。
        由于源地址是不存在的,服务器需要不断的重发直至超时,这些伪造的SYN包将长时间占用未连接队列,
        正常的SYN请求被丢弃,导致目标系统运行缓慢,严重者会引起网络堵塞甚至系统瘫痪。
    - 检测 SYN 攻击<br/>
        服务器上看到大量的半连接状态时,特别是源IP地址是随机的,基本上可以断定这是一次SYN攻击。
        在 Linux/Unix 上可以使用系统自带的 netstats 命令来检测 SYN 攻击。
    - SYN 攻击<br/>
        SYN攻击不能完全被阻止,除非将TCP协议重新设计。
        我们所做的是尽可能的减轻SYN攻击的危害,常见的防御 SYN 攻击的方法有如下几种：
        1. 缩短超时（SYN Timeout）时间
        2. 增加最大半连接数
        3. 过滤网关防护
        4. SYN cookies技术

2. UDP<br/>
    UDP 是一个简单的传输层协议。和 TCP 相比,UDP 有下面几个显著特性：

    1. UDP 缺乏可靠性。UDP 本身不提供确认,序列号,超时重传等机制。
       UDP 数据报可能在网络中被复制,被重新排序。
       即 UDP 不保证数据报会到达其最终目的地,也不保证各个数据报的先后顺序,也不保证每个数据报只到达一次
    2. UDP 数据报是有长度的。
       每个 UDP 数据报都有长度,如果一个数据报正确地到达目的地,那么该数据报的长度将随数据一起传递给接收方。而 TCP 是一个字节流协议,没有任何（协议上的）记录边界。
    3. UDP 是无连接的。UDP 客户和服务器之前不必存在长期的关系。
       UDP 发送数据报之前也不需要经过握手创建连接的过程。
    4. UDP 支持多播和广播。